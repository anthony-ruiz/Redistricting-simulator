<!DOCTYPE html>
<html>

<head>

    <title>CSE308 Titans</title>

    <meta charset="utf-8" />
    <link rel="stylesheet" href="./css/style.css">

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css" integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js" integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA=="crossorigin=""></script>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>

</head>

<body>
    <div id='map'>
        <script type="text/javascript" src="./states/combined_states.js"></script>

        <script type="text/javascript" src="./precincts/az.js"></script>
        <script type="text/javascript" src="./precincts/mn.js"></script>
        <script type="text/javascript" src="./precincts/wi.js"></script>

        <script type="text/javascript" src="./javascript/map.js"></script>
        <script type="text/javascript" src="./javascript/state.js"></script>
        <script type="text/javascript" src="./javascript/precinct.js"></script>
		
        <script>
            var req;
                var s;
                var w;
                var a;
                var f;
                function startAlgorithm() {
                    s = currentState;
                    w1 = document.getElementById("weight1").value;
                    w2 = document.getElementById("weight2").value;
                    w3 = document.getElementById("weight3").value;
                    a = document.getElementById("algorithm").value;
                    var algorithmObj = {"state":s, "politicalFairness":w1, "compactness":w2, "populationEquality":w3, "algorithm":a};
                    var myJSON = JSON.stringify(algorithmObj);
                    req = new XMLHttpRequest();
                    var url = "http://localhost:8080/CSE308/JsonHandler";
                    req.open("POST", url, true);
                    req.setRequestHeader('Content-type','application/json; charset=utf-8');
                    req.onreadystatechange = validateAlgorithmSuccess;
                    req.send(myJSON);
                }

                function validateAlgorithmSuccess() {
                    if(req.readyState == 4 && req.status == 200) {      
                        alert(req.responseText)
                    }
                }
        </script>
		
		
    </div>

    <div class="sidenav" align="center">
        <div class="cbox" id="sidebar1">
            <p align style="color: #2d7499;  font-size: 25px;">Select a State</p>
            <select name="states" id="states" onchange="comboBoxClicked()">
                <option value="default" default disabled selected>Select a State</option>
                <option value="Arizona">Arizona</option>
                <option value="Minnesota">Minnesota</option>
                <option value="Wisconsin">Wisconsin</option>
            </select>
        </div>

        <div id="sidebar2">
            <a onclick="showAllStates()">Show All States</a>
            <br>
            Political Fairness:<br>
            <div class="slidecontainer">
                <input type="range" min="0" max="100" value="50" default="50" class="slider" id="weight1">
            </div>
            <br>
            Compactness:<br>
            <div class="slidecontainer">
                <input type="range" min="0" max="100" value="50" default="50" class="slider" id="weight2">
            </div>
            <br>
            Population Equality:<br>
            <div class="slidecontainer">
                <input type="range" min="0" max="100" value="50" default="50" class="slider" id="weight3">
            </div>
            <br>
            Algorithm:<br>
            <input type="radio" name="algorithm" value="REGION_GROWING" id="algorithm"> Region Growing<br>
            <input type="radio" name="algorithm" value="SIMULATED_ANNEALING" id="algorithm"> Simulated Annealing<br>
            <br><br>
            <span class="error" id="drpnoticeMessage"></span>
            <button onclick="startAlgorithm()">Submit</button>
        </div>
        <br>
    </div>
</body>

</html>